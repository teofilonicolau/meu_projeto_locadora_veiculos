<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="layout (conteudo)">
<head>
    <meta charset="UTF-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="icon" href="/./images/locadoraFavicon.png" type="image/x-icon">
</head>
<body class="d-flex align-items-center py-4 bg-body-tertiary">
<header>
    <main class="w-100 m-auto form-container">
        <h1 class="h3 mb-3 fw-normal custom-h1">Locadora de Veículos</h1>

        <!-- Botão para abrir o modal de criar veículo -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#criarVeiculoModal">
            Criar Veículo
        </button>


        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#buscarTodosVeiculosModal">
            Buscar Todos
        </button>

        <!-- Botão para abrir o modal de buscar veículo por ID -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#buscarPorIdVeiculoModal">
            Buscar Por ID
        </button>

        <!-- Botão para abrir o modal de alterar veículo -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#alterarVeiculoModal">
            Alterar Veículo
        </button>

        <!-- Botão para abrir o modal de buscar veículo por placa -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#buscarPorPlacaVeiculoModal">
            Buscar Por Placa
        </button>

        <!-- Botão para abrir o modal de excluir veículo por ID -->
        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#excluirVeiculoPorIdModal">
            Excluir Veículo Por ID
        </button>

    </main>
</header>

<!-- Modal para criar veículo -->
<div class="modal fade" id="criarVeiculoModal" tabindex="-1" aria-labelledby="criarVeiculoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="criarVeiculoModalLabel">Criar Veículo</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="formCriarVeiculo">
                    <label for="placa">Placa:</label>
                    <input type="text" id="placa" class="form-control" required>
                    <label for="marca">Marca:</label>
                    <input type="text" id="marca" class="form-control" required>
                    <label for="modelo">Modelo:</label>
                    <input type="text" id="modelo" class="form-control" required>
                    <label for="tipo">Tipo:</label>
                    <input type="text" id="tipo" class="form-control" required>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                <button type="button" class="btn btn-primary" onclick="criarVeiculo()">Salvar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal para buscar todos os veículos -->
<div class="modal fade" id="buscarTodosVeiculosModal" tabindex="-1" aria-labelledby="buscarTodosVeiculosModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="buscarTodosVeiculosModalLabel">Buscar Todos os Veículos</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <table class="table" id="tabelaVeiculosModal">
                    <!-- Conteúdo da tabela aqui -->
                </table>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal para buscar veículo por ID -->
<div class="modal fade" id="buscarPorIdVeiculoModal" tabindex="-1" aria-labelledby="buscarPorIdVeiculoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="buscarPorIdVeiculoModalLabel">Buscar Veículo Por ID</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <label for="idVeiculo">ID do Veículo:</label>
                <input type="text" id="idVeiculo" class="form-control" required>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                <button type="button" class="btn btn-primary" onclick="buscarVeiculoPorId()">Buscar</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal para alterar veículo -->
<div class="modal fade" id="alterarVeiculoModal" tabindex="-1" aria-labelledby="alterarVeiculoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Conteúdo do modal de alteração aqui -->
        </div>
    </div>
</div>
<!-- Modal para buscar veículo por placa  -->
<div class="modal fade" id="buscarPorPlacaVeiculoModal" tabindex="-1" aria-labelledby="buscarPorPlacaVeiculoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Conteúdo do modal de busca por placa aqui -->
        </div>
    </div>
</div>
<!-- Modal para excluir veículo Por ID -->
<div class="modal fade" id="excluirVeiculoPorIdModal" tabindex="-1" aria-labelledby="excluirVeiculoPorIdModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="excluirVeiculoPorIdModalLabel">Excluir Veículo Por ID</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <label for="idVeiculoExcluir">ID do Veículo:</label>
                <input type="text" id="idVeiculoExcluir" class="form-control" required>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                <button type="button" class="btn btn-danger" onclick="excluirVeiculoPorId()">Excluir</button>
            </div>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Lógica JavaScript -->
<script>
    function criarVeiculo() {
        // Obtenha os dados do formulário
        var placa = document.getElementById("placa").value;
        var marca = document.getElementById("marca").value;
        var modelo = document.getElementById("modelo").value;
        var tipo = document.getElementById("tipo").value;

        // Aqui você pode usar o Axios para fazer uma solicitação POST para o servidor
        // Exemplo usando Axios:
         axios.post('/criar', { placa, marca, modelo, tipo })
             .then(response => {
                 alert(response.data);
            })
             .catch(error => {
                console.error('Erro ao criar veículo', error);
             });

        // Feche o modal após o envio do formulário
        $('#criarVeiculoModal').modal('hide');

         //Limpe os campos do formulário após o envio
        document.getElementById("placa").value = "";
        document.getElementById("marca").value = "";
        document.getElementById("modelo").value = "";
        document.getElementById("tipo").value = "";
    }

    function buscarTodosVeiculos() {
         //Aqui você pode usar o Axios para fazer uma solicitação GET para o servidor
         //Exemplo usando Axios:
        axios.get('/todos')
            .then(response => {

                $("#tabelaVeiculos tbody").empty();

                 //Preencher a tabela com os dados recebidos do servidor
                response.data.forEach(veiculo => {
                    $("#tabelaVeiculos tbody").append(
                        `<tr>
                            <td>${veiculo.id}</td>
                            <td>${veiculo.placa}</td>
                            <td>${veiculo.marca}</td>
                            <td>${veiculo.modelo}</td>
                            <td>${veiculo.tipo}</td>
                            <td>${veiculo.disponivel}</td>
                        </tr>`
                    );
                });

                //Feche o modal após buscar os dados
                $('#buscarTodosVeiculosModal').modal('show');
            })
            .catch(error => {
                console.error('Erro ao buscar todos os veículos', error);
            });
    }

    function buscarVeiculoPorId() {
         Obtenha o ID do formulário
        var idVeiculo = document.getElementById("idVeiculo").value;

         Aqui você pode usar o Axios para fazer uma solicitação GET para o servidor
         Exemplo usando Axios:
         axios.get('/por-id/' + idVeiculo)
             .then(response => {
                 // Preencha o modal com os dados recebidos do servidor
                 // ...

              // Feche o modal após buscar os dados
               $('#buscarPorIdVeiculoModal').modal('hide');
           })
             .catch(error => {
                 console.error('Erro ao buscar veículo por ID', error);
             });
    }

    Função para alterar veículo
    function alterarVeiculo() {
         Obtenha os dados do formulário
        var placa = document.getElementById("placaAlterar").value;
        var marca = document.getElementById("marcaAlterar").value;
        var modelo = document.getElementById("modeloAlterar").value;
        var tipo = document.getElementById("tipoAlterar").value;

         Aqui você pode usar o Axios para fazer uma solicitação PUT para o servidor
         Substitua '/alterar' com a rota correta do seu backend
         Exemplo usando Axios:
        axios.put('/alterar', { placa, marca, modelo, tipo })
            .then(response => {
                 alert(response.data);
             })
             .catch(error => {
                 console.error('Erro ao alterar veículo', error);
             });

         Feche o modal após o envio do formulário
        $('#alterarVeiculoModal').modal('hide');

         Limpe os campos do formulário após o envio
        document.getElementById("placaAlterar").value = "";
        document.getElementById("marcaAlterar").value = "";
        document.getElementById("modeloAlterar").value = "";
        document.getElementById("tipoAlterar").value = "";
    }

    Função para buscar veículo por placa
    function buscarVeiculoPorPlaca() {
         Obtenha a placa do formulário
        var placaBuscar = document.getElementById("placaBuscar").value;

         Aqui você pode usar o Axios para fazer uma solicitação GET para o servidor
         Substitua '/por-placa/' com a rota correta do seu backend
         Exemplo usando Axios:
         axios.get('/por-placa/' + placaBuscar)
             .then(response => {
                 // Preencha o modal com os dados recebidos do servidor
                // ...

                 // Feche o modal após buscar os dados
                 $('#buscarPorPlacaVeiculoModal').modal('hide');
             })
             .catch(error => {
                 console.error('Erro ao buscar veículo por placa', error);
             });
    }

    function excluirVeiculoPorId() {
         Obtenha o ID do formulário
        var idVeiculoExcluir = document.getElementById("idVeiculoExcluir").value;

         Aqui você pode usar o Axios para fazer uma solicitação DELETE para o servidor
         Exemplo usando Axios:
         axios.delete('/remover-por-id/' + idVeiculoExcluir)
            .then(response => {
                 alert(response.data);
             })
             .catch(error => {
                 console.error('Erro ao excluir veículo por ID', error);
             });

        // Feche o modal após excluir o veículo
        $('#excluirVeiculoPorIdModal').modal('hide');

         Limpe o campo do formulário após a exclusão
        document.getElementById("idVeiculoExcluir").value = "";
    }
</script>
</body>
</html>
